\begin{figure}[t]
%% TODO use instantiate macro
\judgbox
  {\instantiate{\dexp}{u}{\dexp'} = \dexp''}
  {$\dexp''$ is the result of instantiating hole $u$ with $\dexp$ in $\dexp'$}
  %% {$\dexp''$ is the result of substituting $\dexp$ for $u$ in $\dexp'$}
\[
\begin{array}{lcll}
\instantiate{\dexp}{u}{c}
&=&
c\\
{\instantiate{\dexp}{u}{x}}
&=&
\dexp\\
%% {[\dexp_1 / x] y}
%% &=&
%% y & (y \neq x)\\
{\instantiate{\dexp}{u}{\halam{x}{\htau}{\dexp'}}}
&=&
{\halam{x}{\htau}{\instantiate{\dexp}{u}{\dexp'}}}\\
{\instantiate{\dexp}{u}{\dap{d_1}{d_2}}}
&=&
{\dapP{\instantiate{\dexp}{u}{d_1}}{\instantiate{\dexp}{u}{d_2}}}
\\
% {[\dexp_1 / x] \dinj{i}{e_2}}
% &=&
% {\dinj{i}{[\dexp_1 / x] e_2}}
% \\
% {[\dexp_1 / x] \dcase{e}{x}{e_x}{y}{e_y}}
% &=&
% {\dcase{[\dexp_1 / x]e}{x}{[\dexp_1 / x]e_x}{y}{[\dexp_1 / x]e_y}}
% \\
\instantiate{\dexp}{u}{\dehole{u}{\subst}{}}
&=&
[\subst]\dexp
\\
\instantiate{\dexp}{u}{\dhole{\dexp'}{u}{\subst}{}}
&=&
[\subst]\dexp
\\
\instantiate{\dexp}{u}{\dcasttwo{\dexp'}{\htau}{\htau'}}
&=&
\dcasttwo{(\instantiate{\dexp}{u}{\dexp'})}{\htau}{\htau'}
\\
\instantiate{\dexp}{u}{\dcastfail{\dexp'}{\htau_1}{\htau_2}}
&=&
\dcastfail{(\instantiate{\dexp}{u}{\dexp'})}{\htau_1}{\htau_2}
%% {[\dexp_1 / x] \dcast{\htau}{\dexp}}
%% &=&
%% \dcast{\htau}{[\dexp_1 / x] \dexp}
\end{array}
\]
\caption{Hole Instantiation}
\end{figure}
